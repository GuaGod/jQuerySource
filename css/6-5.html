<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="http://code.jquery.com/jquery-latest.js"></script>
<title></title>
</head>
<body>

<button id="test1">jQuery的querySelectorAll的处理</button>
<button id="test2">模拟jQuery的querySelectorAll的处理</button>

<div class= "aaron">
     <p><span>慕课网</span></p>
     <div class="text">Aaron</div>
</div>

<script type="text/javascript">
  
   $("#test1").click(function() {
       var a = $(".aaron");
       console.log(a.find(".aaron span").length);
   })

   $("#test2").click(function() {
       var context = document.querySelector('.aaron');
       var old;
       var nid = Math.random();

       if( (old = context.getAttribute('id'))) {
           nid = old.replace(/'|\\/g, "\\$&");
       } else {
           context.setAttribute("id", nid);
       }

       nid = "[id='" + nid + "']";

       var newSelector = nid + '.aaron span';
       console.log(newSelector);
       if (newSelector) {
           try {
            console.log(context.querySelectorAll(newSelector))
               console.log(context.querySelectorAll(newSelector).length)
           } catch (qsaError) {

           } finally {
               if (!old) {
                   context.removeAttribute('id');
               }
           }
       }
   })







</script> 

</body>
</html>